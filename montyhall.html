<canvas id="gc" width="600" height="600"></canvas>
<script>
window.onload=function() {


	canv=document.getElementById("gc");
	ctx=canv.getContext("2d");
	//canv.addEventListener('mousemove', function(evt){ var mousePos= calculateMousePos(evt);
							//paddle1Y= mousePos.y-PADDLE_HEIGHT/2;
							//});

	document.addEventListener("keydown", keyPush);


	setInterval(function() {
				
				draw();
				},
				1000/60);
	
}





var canv;
var ctx;










var keyPush = function(evt){
slow=!slow;


switch(evt.keyCode)
	{
}
	
};


//Function for drawing lines

var line = function (x1, y1, x2, y2)
{
ctx.beginPath();
ctx.moveTo(x1,y1);
ctx.lineTo(x2,y2);
ctx.stroke();


}


var angle=0;
var pos =0;
var winningpos;		// Winning position where car is
var selection;		// position that we are selecting
var goat1;
var goat2;
var c1=0;
var c2=0;
var c3=0;
var step=0;
var wins=0;
var trials=1000;
var runonce=true;
var count=0;
var showoutput=true;
var slow=false;
var frame=0;


function draw(){
frame++;
if((slow) && (frame%80==0) || (!slow))
	{	
	if(runonce)
		{
		if(count<trials);
			{
			count++;
			//runTest1();
			runTest2();
			progressBar();
		 
			}		
		}
}

function drawCar(pos)
	{
colorRect(pos*canv.width/3+60, canv.height/2-40, 80,40, 'green');
colorRect(pos*canv.width/3+70, canv.height/2-35, 60,30, 'dimgray');
ctx.strokeStyle='white';
line(pos*canv.width/3+80, canv.height/2-15, pos* canv.width/3+90, canv.height/2-25);
line(pos*canv.width/3+90, canv.height/2-10, pos* canv.width/3+110, canv.height/2-25)
colorRect(pos*canv.width/3+50, canv.height/2, 100,50, 'green');
colorRect(pos*canv.width/3+50, canv.height/2+50, 10,20, 'black');
colorRect(pos*canv.width/3+140, canv.height/2+50, 10,20, 'black');
colorRect(pos*canv.width/3+60, canv.height/2+10, 80, 30, 'black');
ctx.strokeStyle='grey';
line(pos*canv.width/3+70, canv.height/2+20, pos*canv.width/3+130, canv.height/2+20);
line(pos*canv.width/3+70, canv.height/2+30, pos*canv.width/3+130, canv.height/2+30);
	}

function drawGoat(pos)
	{
var point1=[pos*canv.width/3+100, canv.height/2+20];


colorRect(point1[0]-15, point1[1]+10, 5,30, 'black');
colorRect(point1[0]-5, point1[1]+10, 5,30, 'black');
colorRect(point1[0]+5, point1[1]+10, 5,30, 'black');
colorRect(point1[0]+15, point1[1]+10, 5,30, 'black')


colorCircle(point1[0], point1[1]-10, 35, 'saddlebrown');
ctx.strokeStyle='black';
ctx.fillStyle='saddlebrown';
ctx.beginPath();
ctx.moveTo(point1[0], point1[1]);
ctx.lineTo(point1[0]+50, point1[1]-50);
ctx.lineTo(point1[0]-50, point1[1]-50);
ctx.lineTo(point1[0], point1[1]);
ctx.stroke();
ctx.fill();

colorCircle(point1[0]-15, point1[1]-35, 5, 'white');
colorCircle(point1[0]+ 	15, point1[1]-35, 5, 'white');
colorCircle(point1[0]- 	15, point1[1]-33, 3, 'black');
colorCircle(point1[0]+ 	15, point1[1]-33, 3, 'black');

ctx.beginPath();
	ctx.arc(point1[0], point1[1]-20, 5, Math.PI, 0, true);
	ctx.fill();
}




function drawSelection(sel)
{
var point1=[sel*canv.width/3+100, canv.height/2-80];


ctx.fillStyle='blue';
ctx.beginPath();
ctx.moveTo(point1[0], point1[1]);
ctx.lineTo(point1[0]+50, point1[1]-50);
ctx.lineTo(point1[0]-50, point1[1]-50);
ctx.lineTo(point1[0], point1[1]);
ctx.stroke();
ctx.fill();
colorRect(point1[0]-50, point1[1]-100, 100, 50, 'blue');
}

function drawElim(elim)
{
ctx.lineWidth=30;
var offset=200;
ctx.strokeStyle='red';
line(elim * canv.width/3+250-offset, canv.height/2-80, elim* canv.width/3+350-offset, canv.height/2+70);
line(elim * canv.width/3+250-offset, canv.height/2+70, elim* canv.width/3+350-offset, canv.height/2-80);
ctx.lineWidth=1;
}



function keyPush(evt) {




}

function colorRect(leftX, TopY, width, height, drawColor)
{
	
	ctx.fillStyle= drawColor;
	//ctx.strokeRect(leftX, TopY, width, height);
	ctx.fillRect(leftX, TopY, width, height);
	
}



function colorCircle(centerX, centerY, radius, ballColor)
{
	ctx.fillStyle=ballColor;
	ctx.beginPath();
	ctx.arc(centerX, centerY, radius, 0, Math.PI*2, true);
	ctx.fill();


}


function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

function getRand(min, max) {
  return (Math.random() * (max - min) + min);
}

function runTest1()
{
		winningpos=getRandomInt(3);
		selection=getRandomInt(3);
		colorRect(0,0, canv.width, canv.height,'skyblue');
		if(winningpos==selection)
			{
			wins++;
			}



	if(showoutput)
	{
	 	drawCar(winningpos);
		drawSelection(selection);
	switch (winningpos)
		{
		case 0: goat1=1;
			goat2=2;
			break
		case 1: goat1=0;
			goat2=2;
			break;
		case 2: goat1=0;
			goat2=1;
			break;
		}
	drawGoat(goat1);
	drawGoat(goat2);
	}
	//drawElim(0);
	
if(count==trials)
{
	count++;
	alert(trials + " trials complete! Total wins = " + wins + ". With a win percentage of: " + wins/trials*100 + "%");
	runonce=false;	
}
}

//Select "door", Reveal Goat, change door

function runTest2() 
{
		var elim;
		winningpos=getRandomInt(3);
		selection=getRandomInt(3);
		colorRect(0,0, canv.width, canv.height,'skyblue');

		switch (winningpos) // Put goats where they go
		{
		case 0: goat1=1;
			goat2=2;
			break
		case 1: goat1=0;
			goat2=2;
			break;
		case 2: goat1=0;
			goat2=1;
			break;
		}
if(selection==winningpos)
	{
	
	//drawCar(winningpos);
	//drawGoat(goat1);
	//drawElim(goat1);
	//drawGoat(goat2);
	elim=goat1;
	selection=goat2;
	}
else if (selection==goat1)
		{
		
		//drawGoat(goat2);
		//drawElim(goat2);
		//drawGoat(goat1);
		//drawCar(winningpos);
		elim=goat1;
		selection=winningpos;
		}
else if (selection == goat2)
		{
		//drawGoat(goat1);
		//drawElim(goat1);
		//drawGoat(goat2);
		//drawCar(winningpos);
		elim=goat1;
		selection=winningpos;
		}

if(showoutput)
	{
	drawSelection(selection);
	drawCar(winningpos);
	drawGoat(goat1);
	drawGoat(goat2);
	drawElim(elim);
	}

if(winningpos==selection)
	{
	wins++;
	}

if(count==trials)
{
	count++;
	alert(trials + " trials complete! Total wins = " + wins + ". With a win percentage of: " + wins/trials*100 + "%");
	runonce=false;	
}
}



function progressBar(){
var increment=canv.width/trials;

colorRect(0, canv.height-100, increment*count, 100, 'green');






}





}

</script>
